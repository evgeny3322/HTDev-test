"use strict";(self.webpackChunkwebpack_react_notes_app=self.webpackChunkwebpack_react_notes_app||[]).push([[179],{9981:(e,t,a)=>{var n=a(7294),l=a(745),r=a(5998),o=a(9711),i=a(1508),c=a(4656),s=a(2640),m=a(6974);const u=()=>{var e;const t=(e=>{const{pathname:t}=(0,m.TH)();for(let a=0;a<e.length;a+=1){const n=e[a],l=(0,m.LX)(n,t);if(null!==l)return l}return null})(["/create-task","/"]),a=null===(e=null==t?void 0:t.pattern)||void 0===e?void 0:e.path;return n.createElement(c.Z,{value:a},n.createElement(s.Z,{label:"Создать запись",value:"/create-task",to:"/create-task",component:o.rU}),n.createElement(s.Z,{label:"Записи",value:"/",to:"/",component:o.rU}))},d=()=>n.createElement(i.Z,{sx:{width:"100%"}},n.createElement(u,null));var p=a(2643),h=a(2658),g=a(5295);const v=e=>{const{text:t,sign:a,date:l,index:r}=e;return n.createElement(g.Z,{variant:"outlined",style:{maxWidth:"48%",height:"auto"}},n.createElement(p.Z,null,n.createElement(h.Z,{sx:{fontSize:14},color:"text.secondary",gutterBottom:!0},a),n.createElement(h.Z,{variant:"h5",component:"div"},"Запись №",r+1),n.createElement(h.Z,{sx:{mb:1.5},color:"text.secondary"},l.datetime),n.createElement(h.Z,{variant:"body2"},t)))};var E=a(6492),x=a(6446),f=a(6755),y=a(4347),Z=a(3460);const w=()=>{const e=(0,r.v9)((e=>e.dataList.list)),[t,a]=(0,n.useState)(1),[l,o]=(0,n.useState)("4"),c=Math.ceil(e.length/+l),s=((e,t)=>{const[a,l]=(0,n.useState)(1),r=Math.ceil(e.length/(t||1)),o=e=>{const t=Math.max(1,e);l((()=>Math.min(t,r)))};return{next:()=>{l((e=>o(e+1)))},prev:()=>{l((e=>o(e-1)))},jump:o,currentData:()=>{const n=(a-1)*t,l=n+t;return e.slice(n,l)},currentPage:a,maxPage:r}})(e,+l);return n.createElement(n.Fragment,null,n.createElement(i.Z,{sx:{minWidth:275},style:{display:"flex",flexWrap:"wrap",gap:"1rem",marginTop:"1rem"}},s.currentData().map((t=>n.createElement(v,{key:t.date.datetime,text:t.text,sign:t.sign,tz:t.tz,date:t.date,index:e.indexOf(t)})))),n.createElement("div",{style:{display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"space-between"}},n.createElement(x.Z,{sx:{m:1,minWidth:120},size:"small"},n.createElement(f.Z,{value:l,onChange:e=>{o(e.target.value)},displayEmpty:!0,inputProps:{"aria-label":"Without label"}},n.createElement(y.Z,{value:4}),n.createElement(y.Z,{value:4},"4 карточки"),n.createElement(y.Z,{value:8},"8 карточек"),n.createElement(y.Z,{value:12},"12 карточек")),n.createElement(Z.Z,null,"Показывать на странице")),n.createElement(E.Z,{count:c,page:t,showFirstButton:!0,showLastButton:!0,onChange:(e,t)=>{a(t),s.jump(t)}})))};var b=a(4659),S=a(7666),k=a(9089),C=a(6307),L=a(427);const I=e=>localStorage.getItem(e),T=(e,t)=>(localStorage.setItem(e,t),!1),z="location",F="sign",O=(0,L.oM)({name:"dataForm",initialState:{location:I(z)||"",text:"",sign:I(F)||"",dataTimeZone:{}},reducers:{changeLocation:(e,t)=>{e.location=t.payload,T(z,t.payload)},changeText:(e,t)=>{e.text=t.payload},changeSign:(e,t)=>{e.sign=t.payload,T(F,t.payload)},changeDataTime:(e,t)=>{e.dataTimeZone=t.payload}}}),{changeLocation:P,changeText:W,changeSign:j,changeDataTime:D}=O.actions,M=O.reducer,_="dataList",B=(0,L.oM)({name:_,initialState:{list:(_,JSON.parse(localStorage.getItem("dataList")||"[]"))},reducers:{addCardToList:(e,t)=>{var a;e.list.push(t.payload),a=e.list,localStorage.setItem("dataList",JSON.stringify(a))}}});const{addCardToList:R}=B.actions,H=B.reducer;var N=a(9986),A=a(442);const J=n.forwardRef((function(e,t){return n.createElement(A.Z,Object.assign({elevation:6,ref:t,variant:"filled"},e))})),U=()=>{const e=(0,r.v9)((e=>e.dataForm)),t=e.location,a=e.text,l=e.sign,[o,i]=(0,n.useState)(!1),[c,s]=(0,n.useState)(!1),[m,u]=(0,n.useState)(!1),[d,p]=(0,n.useState)(!1),h=(0,r.I0)(),g=(e,t)=>{"clickaway"!==t&&(s(!1),u(!1))};return(0,n.useEffect)((()=>{i(""===t||""===a||""===l)}),[t,a,l]),n.createElement(n.Fragment,null,n.createElement(k.Z,{style:{position:"absolute",right:"0"},size:"small",onClick:()=>{var e,n,r,o;p(!0),e=void 0,n=void 0,o=function*(){fetch(`https://worldtimeapi.org/api/timezone/${t}`).then((e=>e.json())).then((e=>{h(D(e)),h(R({text:a,sign:l,tz:t,date:e})),p(!1),h(W("")),s(!0)}),(e=>{console.log(e),u(!0),p(!1)}))},new((r=void 0)||(r=Promise))((function(t,a){function l(e){try{c(o.next(e))}catch(e){a(e)}}function i(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){var a;e.done?t(e.value):(a=e.value,a instanceof r?a:new r((function(e){e(a)}))).then(l,i)}c((o=o.apply(e,n||[])).next())}))},endIcon:n.createElement(C.Z,null),loading:d,loadingPosition:"end",variant:"contained",disabled:o},"Создать"),n.createElement(N.Z,{open:c,anchorOrigin:{vertical:"top",horizontal:"center"},autoHideDuration:2e3,onClose:g},n.createElement(J,{onClose:g,severity:"success",sx:{width:"100%"}},"Запись создана!")),n.createElement(N.Z,{open:m,anchorOrigin:{vertical:"top",horizontal:"center"},autoHideDuration:2e3,onClose:g},n.createElement(J,{onClose:g,severity:"error",sx:{width:"100%"}},"Ошибка при создании записи!")))},q=()=>{const e=(0,r.I0)(),{location:t,text:a,sign:l}=(0,r.v9)((e=>e.dataForm)),[o,c]=(0,n.useState)(t||""),[s,m]=(0,n.useState)(null),[u,d]=(0,n.useState)(!1),[p,h]=(0,n.useState)([]),g=(0,n.useRef)("description-task");return(0,n.useEffect)((()=>{u||fetch("https://worldtimeapi.org/api/timezone").then((e=>e.json())).then((e=>{h(e)}),(e=>{d(!0),m(e)})).then((()=>d(!0)))}),[s,u,p]),n.createElement("div",{style:{position:"relative"}},n.createElement(b.Z,{inputRef:g,style:{marginTop:"2rem",width:"100%"},id:"outlined-textarea",label:"Запись",placeholder:"Введите текст записи",minRows:4,multiline:!0,InputLabelProps:{shrink:!0},value:a,onChange:t=>{return a=t.target.value,void e(W(a));var a}}),n.createElement("div",{style:{marginTop:"1rem",marginBottom:"1rem",display:"flex",justifyContent:"space-between",gap:"1rem"}},n.createElement(b.Z,{sx:{width:"100%"},label:"Подпись",required:!0,inputProps:{maxLength:100},id:"validation-outlined-input",multiline:!0,placeholder:"Введите подпись",InputLabelProps:{shrink:!0},value:l,onChange:t=>{return a=t.target.value,void e(j(a));var a}}),n.createElement(i.Z,{sx:{width:"250px"}},n.createElement(x.Z,{style:{width:"100%"}},n.createElement(S.Z,{id:"demo-simple-select-label"},"Точное время по"),n.createElement(f.Z,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:o,label:"Точное время по",onChange:t=>{c(t.target.value),e(P(t.target.value))}},p.map((e=>n.createElement(y.Z,{value:e,key:e},e))))))),n.createElement(U,null))},K=()=>n.createElement(m.Z5,null,n.createElement(m.AW,{path:"/",element:n.createElement(w,null)}),n.createElement(m.AW,{path:"/create-task",element:n.createElement(q,null)})),V=(0,L.xC)({reducer:{dataForm:M,dataList:H}}),X=document.getElementById("root");if(!X)throw new Error("Failed to find the root element");(0,l.s)(X).render(n.createElement(o.VK,null,n.createElement(r.zt,{store:V},n.createElement((()=>n.createElement("div",{className:"app"},n.createElement(d,null),n.createElement(K,null))),null))))}},e=>{e.O(0,[216],(()=>(9981,e(e.s=9981)))),e.O()}]);